{% load crispy_forms_tags %}
{% load mathfilters %}

<!-- <div class="container"> -->
{% if forloop.first %}
 <div id='rotation_instructor_{{rotation.id}}' class="tab-pane fade in active panel panel-info">
  {% else %}

 <div id='rotation_instructor_{{rotation.id}}' class="tab-pane fade panel panel-info">
  {% endif %}

{% with rotation_groups|get_rotation_groups_by_rotation:rotation.id as rot_groups %}
 <!-- <div class="panel panel-info"> -->
    <div class="panel-heading">
    <h3> <i class="fa fa-user"></i> Instructor Assignments
<a class="btn btn-info float-right-button" href="{% url "dash-manage-users" %}"><span class="fa fa-user"></span> Manage Users</a>
     </h3>
  </div>      
   <div class="panel-body">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Email</th>
          <th>Groups</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
    {% for la in learning_assistants %}        
        <tr>
          <th scope="row">{{forloop.counter}}</th>
          <td>{{la.get_full_name}}
          <td>{{la.email }} </td>
          <td>
{% for rotation_group in rot_groups|get_rotation_groups_by_instructor:la.id %}
  <li>{{rotation_group.group_number}}</li>
{% endfor %}
          </td>
          <td>
            <a href="#" data-toggle="modal" data-target="#assignMultipleGroups_{{la.id}}_{{rotation.id}}"><span class="fa fa-rocket"></span></a>
           </td>
        </tr>
<div class="modal fade" id="assignMultipleGroups_{{la.id}}_{{rotation.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="myModalLabel">Assign Multiple Groups</h4>
      </div>
      <div class="modal-body">
        <h4>Group <span class="assign-group-num"></span></h4>
        <h5> Please select the groups you would like to assign to {{la.get_full_name}} </h5>
        <form class="form-horizontal" action="{% url "classroom-assign-multiple-groups" la.id %}" method="POST">{% csrf_token %}
  <!--       <select name="group_numbers"> -->

         <input type="hidden" value="{{rotation.id}}" name="rotation_pk"/>
          {% for rotation_group in rot_groups %}

          <p style="padding-left: 10px;">
            {% if rotation_group in rotation_groups|get_rotation_groups_by_instructor:la.id %}
              <input type="checkbox" checked name="group_numbers" value='{{rotation_group.id}}'> {{rotation_group.group_number}}</input>
              <span>{{rotation_group.instructor.get_full_name}}</span>
            {% else %}
              <input type="checkbox" name="group_numbers" value='{{rotation_group.id}}'> {{rotation_group.group_number}}</input>
              <span>{{rotation_group.instructor.get_full_name}}</span>
            {% endif %}
          </p>
          {% endfor %}

        </select> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <input type="submit" value="Assign" class="btn btn-primary"/>      
        </form>
      </div>
    </div>

  </div>

</div>          
    {% endfor %} 
    {% endwith %}   
      </tbody>
    </table>    
  </div>  
    </div> 


